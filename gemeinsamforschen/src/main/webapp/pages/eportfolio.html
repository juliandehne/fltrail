<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E Portfolio</title>

    <link rel="stylesheet" type="text/css" href="../assets/css/eportfolio.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>
<body>

<h1>E-Portfolio</h1>
<div class="journal-description-container">
    <div class="journal-description-title">
    </div>
    <div class="journal-description-edit">
        <button>ändern</button>
    </div>
    <div class="journal-description-text">
    </div>
    <div class="journal-description-group">
        <h3>Gruppe</h3>
    </div>
    <div class="journal-description-links">
        <h3>Links</h3>

    </div>

</div>

<h2>Lernatagebuch</h2>
    <select>
        <option>Alle</option>
        <option>Eigene</option>
    </select>

    <a href="createJournal.html">Neu</a>

    <div class="journal">

    </div>
</div>

<script>

    //TODO Get student and project form context

    $(document).ready(function() {
        $.ajax({
            url: "../rest/prejectdescription/0"
        }).then(function(data) {
            $('.journal-description-title').append('<h2>' + data.name + '</h2>');
            $('.journal-description-text').append(data.description);
            for(var link in data.links){
                $('.journal-description-links').append('<a href=' + data.links[link] + '>' + link + '</a><br/>');
            }
            for(var g in data.group){
                $('.journal-description-group').append(data.group[g]+ '<br/>');

            }
        });

        $.ajax({
            url: "../rest/journal//journals/0/0"
        }).then(function(data) {
            for (var journal in data){
                $('.journal').append(
                    '<div class="journal-container"><div class="journal-avatar">' +
                    'getBild'    +
                    '</div><div class="journal-date"> ' +
                    data[journal].creator +
                    '</div><div class="journal-name">' +
                    timestamptToDateString(data[journal].timestamp)  +
                    '</div><div class="journal-category">' +
                    data[journal].category +
                    '</div><div class="journal-edit">' +
                    '<a href="createJournal.html?journal='+ data[journal].id + '"><button>ändern</button></a>' +
                    ' </div><div class="journal-text">' +
                    data[journal].entry +
                    '</div>')
            }
            console.log(data);

        });

    });

    function timestamptToDateString(timestamp) {
        var date = new Date(timestamp);
        return date.toLocaleString("de-DE");
    }


</script>
</body>
</html>